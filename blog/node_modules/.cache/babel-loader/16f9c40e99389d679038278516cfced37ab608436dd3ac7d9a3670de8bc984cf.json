{"ast":null,"code":"export default {\n  name: \"AppNav\",\n  data: () => ({\n    dialog: false,\n    title_in: \"\",\n    text_in: \"\",\n    numpost: 0\n  }),\n  methods: {\n    PublishPost() {\n      console.log(\"Publishing: \" + this.title_in);\n      this.dialog = false;\n      this.fetchData(this);\n      this.postData(this);\n      //this.title_in = \"\";\n      //this.text_in = \"\";\n    },\n\n    async fetchData(ob) {\n      try {\n        let response = await fetch(\"http://localhost:3000/\");\n        if (response.status === 200) {\n          let data = await response.json();\n          ob.numpost = data.length;\n        }\n      } catch (err) {\n        console.log(\"something wrong somewhere else\");\n        let container = document.querySelector(\".v-container\");\n        container.innerHTML = \"<h2>Backend Server Down</h2>\";\n      }\n    },\n    async postData(ob) {\n      const requestOptions = {\n        method: \"POST\",\n        body: JSON.stringify({\n          id: ob.numpost + 1,\n          title: ob.title_in,\n          date: Date(),\n          text: ob.text_in\n        })\n      };\n      try {\n        let response = await fetch(\"http://localhost:3000/\", requestOptions);\n        if (response.status === 200) {\n          let data = await response.json();\n        }\n      } catch (err) {\n        console.log(\"something wrong somewhere else\");\n        let container = document.querySelector(\".v-container\");\n        container.innerHTML = \"<h2>Backend Server Down</h2>\";\n      }\n    }\n  }\n};","map":{"version":3,"names":["name","data","dialog","title_in","text_in","numpost","methods","PublishPost","console","log","fetchData","postData","ob","response","fetch","status","json","length","err","container","document","querySelector","innerHTML","requestOptions","method","body","JSON","stringify","id","title","date","Date","text"],"sources":["/Users/shourjo/Documents/SAF/blog/src/components/AppNav.vue"],"sourcesContent":["<template>\n  <v-toolbar border title=\"My Blog\">\n    <v-btn variant=\"outlined\" @click=\"dialog = true\">Add Post</v-btn>\n    <v-dialog variant=\"outlined\" v-model=\"dialog\" width=\"800\" height=\"auto\">\n      <v-card>\n        <v-spacer></v-spacer>\n        <v-card-title>Create a new blog post</v-card-title>\n        <v-text-field\n          v-model=\"title_in\"\n          label=\"Title\"\n          variant=\"outlined\"\n          style=\"margin-left: auto; margin-right: auto; width: 70%\"\n        ></v-text-field>\n        <v-textarea\n          v-model=\"text_in\"\n          label=\"Text\"\n          variant=\"outlined\"\n          rows=\"12\"\n          style=\"margin-left: auto; margin-right: auto; width: 70%\"\n        ></v-textarea>\n        <v-card-actions>\n          <v-row align=\"center\" justify=\"center\">\n            <v-btn variant=\"outlined\" @click=\"dialog = false\">Back</v-btn>\n            <v-btn variant=\"outlined\" @click=\"PublishPost()\">Publish</v-btn>\n          </v-row>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </v-toolbar>\n</template>\n\n<script>\nexport default {\n  name: \"AppNav\",\n  data: () => ({\n    dialog: false,\n    title_in: \"\",\n    text_in: \"\",\n    numpost: 0,\n  }),\n  methods: {\n    PublishPost() {\n      console.log(\"Publishing: \" + this.title_in);\n      this.dialog = false;\n      this.fetchData(this);\n      this.postData(this);\n      //this.title_in = \"\";\n      //this.text_in = \"\";\n    },\n    async fetchData(ob) {\n      try {\n        let response = await fetch(\"http://localhost:3000/\");\n        if (response.status === 200) {\n          let data = await response.json();\n          ob.numpost = data.length;\n        }\n      } catch (err) {\n        console.log(\"something wrong somewhere else\");\n        let container = document.querySelector(\".v-container\");\n        container.innerHTML = \"<h2>Backend Server Down</h2>\";\n      }\n    },\n    async postData(ob) {\n      const requestOptions = {\n        method: \"POST\",\n        body: JSON.stringify({\n          id: ob.numpost + 1,\n          title: ob.title_in,\n          date: Date(),\n          text: ob.text_in,\n        }),\n      };\n\n      try {\n        let response = await fetch(\"http://localhost:3000/\", requestOptions);\n        if (response.status === 200) {\n          let data = await response.json();\n        }\n      } catch (err) {\n        console.log(\"something wrong somewhere else\");\n        let container = document.querySelector(\".v-container\");\n        container.innerHTML = \"<h2>Backend Server Down</h2>\";\n      }\n    },\n  },\n};\n</script>\n\n<style scoped></style>\n"],"mappings":"AAgCA,eAAe;EACbA,IAAI,EAAE,QAAQ;EACdC,IAAI,EAAEA,CAAA,MAAO;IACXC,MAAM,EAAE,KAAK;IACbC,QAAQ,EAAE,EAAE;IACZC,OAAO,EAAE,EAAE;IACXC,OAAO,EAAE;EACX,CAAC,CAAC;EACFC,OAAO,EAAE;IACPC,WAAWA,CAAA,EAAG;MACZC,OAAO,CAACC,GAAG,CAAC,cAAa,GAAI,IAAI,CAACN,QAAQ,CAAC;MAC3C,IAAI,CAACD,MAAK,GAAI,KAAK;MACnB,IAAI,CAACQ,SAAS,CAAC,IAAI,CAAC;MACpB,IAAI,CAACC,QAAQ,CAAC,IAAI,CAAC;MACnB;MACA;IACF,CAAC;;IACD,MAAMD,SAASA,CAACE,EAAE,EAAE;MAClB,IAAI;QACF,IAAIC,QAAO,GAAI,MAAMC,KAAK,CAAC,wBAAwB,CAAC;QACpD,IAAID,QAAQ,CAACE,MAAK,KAAM,GAAG,EAAE;UAC3B,IAAId,IAAG,GAAI,MAAMY,QAAQ,CAACG,IAAI,CAAC,CAAC;UAChCJ,EAAE,CAACP,OAAM,GAAIJ,IAAI,CAACgB,MAAM;QAC1B;MACF,EAAE,OAAOC,GAAG,EAAE;QACZV,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC;QAC7C,IAAIU,SAAQ,GAAIC,QAAQ,CAACC,aAAa,CAAC,cAAc,CAAC;QACtDF,SAAS,CAACG,SAAQ,GAAI,8BAA8B;MACtD;IACF,CAAC;IACD,MAAMX,QAAQA,CAACC,EAAE,EAAE;MACjB,MAAMW,cAAa,GAAI;QACrBC,MAAM,EAAE,MAAM;QACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UACnBC,EAAE,EAAEhB,EAAE,CAACP,OAAM,GAAI,CAAC;UAClBwB,KAAK,EAAEjB,EAAE,CAACT,QAAQ;UAClB2B,IAAI,EAAEC,IAAI,CAAC,CAAC;UACZC,IAAI,EAAEpB,EAAE,CAACR;QACX,CAAC;MACH,CAAC;MAED,IAAI;QACF,IAAIS,QAAO,GAAI,MAAMC,KAAK,CAAC,wBAAwB,EAAES,cAAc,CAAC;QACpE,IAAIV,QAAQ,CAACE,MAAK,KAAM,GAAG,EAAE;UAC3B,IAAId,IAAG,GAAI,MAAMY,QAAQ,CAACG,IAAI,CAAC,CAAC;QAClC;MACF,EAAE,OAAOE,GAAG,EAAE;QACZV,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC;QAC7C,IAAIU,SAAQ,GAAIC,QAAQ,CAACC,aAAa,CAAC,cAAc,CAAC;QACtDF,SAAS,CAACG,SAAQ,GAAI,8BAA8B;MACtD;IACF;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}