{"ast":null,"code":"import axios from \"axios\";\nexport default {\n  name: \"AppNav\",\n  data: () => ({\n    dialog: false,\n    title_in: \"0\",\n    text_in: \"0\",\n    numpost: 0\n  }),\n  methods: {\n    PublishPost() {\n      console.log(\"Publishing: \" + this.title_in);\n      this.dialog = false;\n      this.postData(this);\n      //this.title_in = \"\";\n      //this.text_in = \"\";\n    },\n\n    async postData(ob) {\n      /*const requestOptions = {\n        method: \"POST\",\n        body: JSON.stringify({\n          id: \"egg\",\n          title: \"egg\",\n          date: \"egg\",\n          text: \"egg\",\n        }),\n      };*/\n      // Fetching info\n      try {\n        let response = await fetch(\"http://localhost:3000/\");\n        if (response.status === 200) {\n          let data = await response.json();\n          ob.numpost = data.length;\n        }\n      } catch (err) {\n        console.log(\"something wrong somewhere else\");\n        let container = document.querySelector(\".v-container\");\n        container.innerHTML = \"<h2>Backend Server Down</h2>\";\n      }\n\n      //posting\n      try {\n        let response = await axios.post(\"http://localhost:3000/\", {\n          id: ob.numpost + 1,\n          title: ob.title_in,\n          date: new Date().toISOString().split(\"T\")[0],\n          text: ob.text_in\n        });\n        if (response.status === 200) {\n          let data = await response.json();\n          data;\n        }\n      } catch (err) {\n        console.log(\"something wrong somewhere else\");\n        let container = document.querySelector(\".v-container\");\n        container.innerHTML = \"<h2>Backend Server Down</h2>\";\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","name","data","dialog","title_in","text_in","numpost","methods","PublishPost","console","log","postData","ob","response","fetch","status","json","length","err","container","document","querySelector","innerHTML","post","id","title","date","Date","toISOString","split","text"],"sources":["/Users/shourjo/Documents/SAF/blog/src/components/AppNav.vue"],"sourcesContent":["<template>\n  <v-toolbar border title=\"My Blog\">\n    <v-btn variant=\"outlined\" @click=\"dialog = true\">Add Post</v-btn>\n    <v-dialog variant=\"outlined\" v-model=\"dialog\" width=\"800\" height=\"auto\">\n      <v-card>\n        <v-spacer></v-spacer>\n        <v-card-title>Create a new blog post</v-card-title>\n        <v-text-field\n          v-model=\"title_in\"\n          label=\"Title\"\n          variant=\"outlined\"\n          style=\"margin-left: auto; margin-right: auto; width: 70%\"\n        ></v-text-field>\n        <v-textarea\n          v-model=\"text_in\"\n          label=\"Text\"\n          variant=\"outlined\"\n          rows=\"12\"\n          style=\"margin-left: auto; margin-right: auto; width: 70%\"\n        ></v-textarea>\n        <v-card-actions>\n          <v-row align=\"center\" justify=\"center\">\n            <v-btn variant=\"outlined\" @click=\"dialog = false\">Back</v-btn>\n            <v-btn variant=\"outlined\" @click=\"PublishPost()\">Publish</v-btn>\n          </v-row>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </v-toolbar>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name: \"AppNav\",\n  data: () => ({\n    dialog: false,\n    title_in: \"0\",\n    text_in: \"0\",\n    numpost: 0,\n  }),\n  methods: {\n    PublishPost() {\n      console.log(\"Publishing: \" + this.title_in);\n      this.dialog = false;\n      this.postData(this);\n      //this.title_in = \"\";\n      //this.text_in = \"\";\n    },\n    async postData(ob) {\n      /*const requestOptions = {\n        method: \"POST\",\n        body: JSON.stringify({\n          id: \"egg\",\n          title: \"egg\",\n          date: \"egg\",\n          text: \"egg\",\n        }),\n      };*/\n      // Fetching info\n      try {\n        let response = await fetch(\"http://localhost:3000/\");\n        if (response.status === 200) {\n          let data = await response.json();\n          ob.numpost = data.length;\n        }\n      } catch (err) {\n        console.log(\"something wrong somewhere else\");\n        let container = document.querySelector(\".v-container\");\n        container.innerHTML = \"<h2>Backend Server Down</h2>\";\n      }\n\n      //posting\n      try {\n        let response = await axios.post(\"http://localhost:3000/\", {\n          id: ob.numpost + 1,\n          title: ob.title_in,\n          date: new Date().toISOString().split(\"T\")[0],\n          text: ob.text_in,\n        });\n        if (response.status === 200) {\n          let data = await response.json();\n          data;\n        }\n      } catch (err) {\n        console.log(\"something wrong somewhere else\");\n        let container = document.querySelector(\".v-container\");\n        container.innerHTML = \"<h2>Backend Server Down</h2>\";\n      }\n    },\n  },\n};\n</script>\n\n<style scoped></style>\n"],"mappings":"AAgCA,OAAOA,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,IAAI,EAAE,QAAQ;EACdC,IAAI,EAAEA,CAAA,MAAO;IACXC,MAAM,EAAE,KAAK;IACbC,QAAQ,EAAE,GAAG;IACbC,OAAO,EAAE,GAAG;IACZC,OAAO,EAAE;EACX,CAAC,CAAC;EACFC,OAAO,EAAE;IACPC,WAAWA,CAAA,EAAG;MACZC,OAAO,CAACC,GAAG,CAAC,cAAa,GAAI,IAAI,CAACN,QAAQ,CAAC;MAC3C,IAAI,CAACD,MAAK,GAAI,KAAK;MACnB,IAAI,CAACQ,QAAQ,CAAC,IAAI,CAAC;MACnB;MACA;IACF,CAAC;;IACD,MAAMA,QAAQA,CAACC,EAAE,EAAE;MACjB;;;;;;;;;MASA;MACA,IAAI;QACF,IAAIC,QAAO,GAAI,MAAMC,KAAK,CAAC,wBAAwB,CAAC;QACpD,IAAID,QAAQ,CAACE,MAAK,KAAM,GAAG,EAAE;UAC3B,IAAIb,IAAG,GAAI,MAAMW,QAAQ,CAACG,IAAI,CAAC,CAAC;UAChCJ,EAAE,CAACN,OAAM,GAAIJ,IAAI,CAACe,MAAM;QAC1B;MACF,EAAE,OAAOC,GAAG,EAAE;QACZT,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC;QAC7C,IAAIS,SAAQ,GAAIC,QAAQ,CAACC,aAAa,CAAC,cAAc,CAAC;QACtDF,SAAS,CAACG,SAAQ,GAAI,8BAA8B;MACtD;;MAEA;MACA,IAAI;QACF,IAAIT,QAAO,GAAI,MAAMb,KAAK,CAACuB,IAAI,CAAC,wBAAwB,EAAE;UACxDC,EAAE,EAAEZ,EAAE,CAACN,OAAM,GAAI,CAAC;UAClBmB,KAAK,EAAEb,EAAE,CAACR,QAAQ;UAClBsB,IAAI,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;UAC5CC,IAAI,EAAElB,EAAE,CAACP;QACX,CAAC,CAAC;QACF,IAAIQ,QAAQ,CAACE,MAAK,KAAM,GAAG,EAAE;UAC3B,IAAIb,IAAG,GAAI,MAAMW,QAAQ,CAACG,IAAI,CAAC,CAAC;UAChCd,IAAI;QACN;MACF,EAAE,OAAOgB,GAAG,EAAE;QACZT,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC;QAC7C,IAAIS,SAAQ,GAAIC,QAAQ,CAACC,aAAa,CAAC,cAAc,CAAC;QACtDF,SAAS,CAACG,SAAQ,GAAI,8BAA8B;MACtD;IACF;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}